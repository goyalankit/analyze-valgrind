Run bundle to get the ruby dependencies for command line parsing and debugging gems

```
bundle install
```

### Scripts

---

### `m`

> This scripts takes a bar.c file and generates macpo trace from it. This is a simple bash script and takes a fixed number of arguments.

Syntax: `m foo bar.c`

**foo**: Method to be instrumented.
**bar.c**: Main source file

---

### `v`

> This is a bash script. It can take several options.

`run|clean|clr|gcc|icc|icrun|gcrun`

* `icrun|iccrun|irun`: This will compile the source code with icc compilers with no vectorization. It will then run the valgrind on it and output the trace file.

Syntax: `v icrun bar.c` : It will generate bar_val_out with valgrind trace. This is raw format that it generated by valgrind. You need to parse it with `pv` command.

* `gcrun|gccrun|grun` : Same as above command however compiles using gcc compiler.

* `clr` : it clears all the compiled, generated files. Leaving the source code file and valgrind output file(`*_val_out`) intact.

* `clro` : `clr` + remove the `*_val_out` file.

NOTES: Currently instrumentation pragmas are not integrated into instrumentation framework. You need to insert three statements to get valgrind trace that can be parsed by parser.

1. Include the header file: `#include "/work/02681/ankitg/workspace/valgrind/gleipnir/gleipnir.h"`

2. Insert `GL_GLOBAL_START_INSTR;` at the starting of the function you want to instrument.

3. Insert `GL_GLOBAL_STOP_INSTR;` at the end of the function

Files Generated:
`bar_val.icc_val_out` Contains the variable information. Stuff like variable names, their base addresses, type size.
`gleipnir.$pid` Contains the actual trace from valgrind.

---

### `pv` : Parse valgrind

###### `pv bar_out.icc_val_out gleipnir.30221 macpo > macpo.out`
Base file generate the binary that can be parsed by macpo analyze.

Output Format:
```
R : a+ffeffdfe0 : 4
W : b+ffeffde44 : 4
W : a+ffeffdfe0 : 4
R : a+ffeffdfdc : 4
W : b+ffeffde40 : 4
W : a+ffeffdfdc : 4
```


###### `pv bar_out.icc_val_out gleipnir.30221 mlo > val_trace.out`
To generate results like macpo-analyze command. Absolute access indexes

Output Format:
```
R : a+6 : 4
W : b+7 : 4
W : a+6 : 4
R : a+5 : 4
W : b+6 : 4
W : a+5 : 4
```

---

### `macpo-format/val-to-mac` 

Convert into a binary that macpo-analyze can understand.

###### `macpo-format/val-to-mac macpo.out macpo-out.out` 

This will generate a binary that `macpo-analyze` script can understand. Note by default `mem-info` is added.


###### `macpo-format/val-to-mac macpo.out macpo-out.out trace`

To generate trace info.



